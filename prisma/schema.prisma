generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String      @id @default(cuid())
  username  String      @unique
  email     String?     @unique
  name      String?
  workouts  WorkoutDay[]
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
}

model WorkoutDay {
  id         String     @id @default(cuid())
  user       User?      @relation(fields: [userId], references: [id])
  userId     String?
  date       DateTime
  program    String
  exercises  Exercise[]
  notes      String?
  deletedAt  DateTime?
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt

  @@index([userId, date])
}

model Exercise {
  id           String     @id @default(cuid())
  workoutDay   WorkoutDay @relation(fields: [workoutDayId], references: [id])
  workoutDayId String
  order        Int
  nameGr       String
  nameEn       String?
  sets         Set[]
  deletedAt    DateTime?
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  @@index([workoutDayId, order])
}

model Set {
  id         String   @id @default(cuid())
  exercise   Exercise @relation(fields: [exerciseId], references: [id])
  exerciseId String
  order      Int
  kg         Float?
  reps       Int?
  notes      String?
  deletedAt  DateTime?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([exerciseId, order])
}
